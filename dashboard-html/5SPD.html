<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i,900,900i" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css?family=Gugi" rel="stylesheet" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
<link rel="stylesheet" type="text/css" href="css/responsive.css" />
<title>Love moving | Dashboard </title>
</head>
<body>


<div class="whitehdr">
  <div class="wrap tbpadding">
             <h1 class="logowrap"><a href="https://lovemoving.herokuapp.com"><img src="images/logo.png" alt="logo"></a></h1>	
             <!-- <h1 class="logowrap"><a href="http://localhost/shikhar/lovemoving-html/"><img src="images/logo.png" alt="logo"></a></h1>	 -->
         <div class="topbar-rgt">
         	 <div class="profile-area">
         		<a href="#"><span>Welcome, Gabriel </span><img src="images/pic-1.jpg" alt="pic-1"></a>
             </div>
             <div class="icons">
             	<a href="0chat.html"><img src="images/icon-chat.png" alt="chat"></a>
             </div>
             <div class="icons">
             	<a href="#"><img src="images/icon-bell.png" alt="bell"></a>
             </div>
             <div class="icons">
             	<a href="#"><img src="images/icon-setting.png" alt="setting"></a>
             </div>
             <div class="profile-area">
                <h4 id="logout" style="cursor: pointer;">Logout</h4>
            </div>
         </div>
   </div>
</div>



<div class="navwrap">
		<div class="wrap">
            <label for="show-menu" class="show-menu">Show Menu</label>
			<input type="checkbox" id="show-menu" role="button">
         	<ul id="menu">
                <li><a href="1SPD.html">Overview </a></li>
                <li><a href="2SPD.html">Profile </a></li>
                <li><a href="SPD-orders.html">Orders </a></li>
                <li><a href="3SPD.html">Financial </a></li>
                <li><a href="4SPD.html">Training </a></li>
                <li><a href="5SPD.html" class="active">Calendar </a></li>
                <li><a href="6SPD.html">Settings </a></li>
            </ul>
         </div>
</div>



<div class="content-area">
    <div class="wrap content-wrap">
           <div class="whbox-wrap">
    	  		 <div class="whbox">
                    <div class="padding smpd">
                        <div class="text-hd sethding">
                            <h2><strong>Set / Check Availability </strong></h2>
                        </div>
                        <span class="custom-dropdown">
                            <select id="years">
                                <option value="2018">2018</option>
                                <option value="2019">2019</option>
                                <option value="2020">2020</option>
                                <option value="2021">2021</option>
                                <option value="2022">2022</option>
                            </select>
                        </span>
                        <span class="custom-dropdown">
                            <select id="months">
                                <option>January</option>
                                <option>February</option>
                                <option>March</option>
                                <option>April</option>
                                <option>May</option>
                                <option>June</option>
                                <option>July</option>
                                <option>August</option>
                                <option>September</option>
                                <option>October</option>
                                <option>November</option>
                                <option>December</option>
                            </select>
                        </span>
                        <div class="availonoff">
                        	<label class="switch">
                              <input type="checkbox" checked>
                              <span class="slider round"></span>
                            </label><strong>Available Now </strong>
                        </div>
                    </div>
                    <div class="text-hd padding">
                        <h4>March, 2018 </h4>
                    </div>
                    <div class="dateline">
                    	<div class="dline">
                        	<ul id="daysInMonth">
                                
                            </ul>
                        </div>
                    </div>
                    <div class="padding timeline">
                         <span>Timeline Manager </span>
                         <span class="rgt">Manage Hourlies </span>
                         <br class="clear" />
                         <div class="timelinewrap">
                                <ul>
                                    <li><label class="radiotimeline"><input type="checkbox" id="1AM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>1AM</strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="2AM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>2AM</strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="3AM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>3AM</strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="4AM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>4AM</strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="5AM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>5AM</strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="6AM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>6AM</strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="7AM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>7AM</strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="8AM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>8AM</strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="9AM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>9AM</strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="10AM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>10AM </strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="11AM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>11AM </strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="12AM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>12AM </strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="1PM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>1PM </strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="2PM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>2PM </strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="3PM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>3PM </strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="4PM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>4PM </strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="5PM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>5PM </strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="6PM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>6PM </strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="7PM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>7PM </strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="8PM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>8PM </strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="9PM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>9PM </strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="10PM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>10PM </strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="11PM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>11PM </strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" id="12PM" class="clear" name="timelineradio"><span class="timecheckmark"><strong>12PM </strong></span></label></li>
                                   <!--  <li class="grn"><label class="radiotimeline"><input type="checkbox" name="timelineradio"><span class="timecheckmark"><strong>6AM </strong></span></label></li>
                                    <li class="grn"><label class="radiotimeline"><input type="checkbox" name="timelineradio"><span class="timecheckmark"><strong>7AM </strong></span></label></li>
                                    <li class="grn"><label class="radiotimeline"><input type="checkbox" name="timelineradio"><span class="timecheckmark"><strong>8AM </strong></span></label></li>
                                    <li class="grn"><label class="radiotimeline"><input type="checkbox" name="timelineradio"><span class="timecheckmark"><strong>9AM </strong></span></label></li>
                                    <li class="grn"><label class="radiotimeline"><input type="checkbox" name="timelineradio"><span class="timecheckmark"><strong>10AM </strong></span></label></li>
                                    <li class="pink"><label class="radiotimeline"><input type="checkbox" name="timelineradio"><span class="timecheckmark"><strong>11AM </strong></span></label></li>
                                    <li class="pink"><label class="radiotimeline"><input type="checkbox" name="timelineradio"><span class="timecheckmark"><strong>12AM </strong></span></label></li>
                                    <li class="pink"><label class="radiotimeline"><input type="checkbox" name="timelineradio"><span class="timecheckmark"><strong>1PM </strong></span></label></li>
                                    <li class="grn"><label class="radiotimeline"><input type="checkbox" name="timelineradio"><span class="timecheckmark"><strong>2PM </strong></span></label></li>
                                    <li class="grn"><label class="radiotimeline"><input type="checkbox" name="timelineradio"><span class="timecheckmark"><strong>3PM </strong></span></label></li>
                                    <li class="grn"><label class="radiotimeline"><input type="checkbox" name="timelineradio"><span class="timecheckmark"><strong>4PM </strong></span></label></li>
                                    <li class="pink"><label class="radiotimeline"><input type="checkbox" name="timelineradio"><span class="timecheckmark"><strong>5PM </strong></span></label></li>
                                    <li class="pink"><label class="radiotimeline"><input type="checkbox" name="timelineradio"><span class="timecheckmark"><strong>6PM </strong></span></label></li>
                                    <li class="pink"><label class="radiotimeline"><input type="checkbox" name="timelineradio"><span class="timecheckmark"><strong>7PM </strong></span></label></li>
                                    <li class="pink"><label class="radiotimeline"><input type="checkbox" name="timelineradio"><span class="timecheckmark"><strong>8PM </strong></span></label></li>
                                    <li class="pink"><label class="radiotimeline"><input type="checkbox" name="timelineradio"><span class="timecheckmark"><strong>9PM </strong></span></label></li>
                                    <li class="pink"><label class="radiotimeline"><input type="checkbox" checked="checked" name="timelineradio"><span class="timecheckmark"><strong>10PM </strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" name="timelineradio"><span class="timecheckmark"><strong>11PM </strong></span></label></li>
                                    <li><label class="radiotimeline"><input type="checkbox" name="timelineradio"><span class="timecheckmark"><strong>12PM </strong></span></label></li> -->
                                </ul>
                         </div>
                         
                         <div class="timelinehour">
                                <ul>
                                    <li>1AM </li>
                                    <li>2AM </li>
                                    <li>3AM </li>
                                    <li>4AM </li>
                                    <li>5AM </li>
                                    <li>6AM </li>
                                    <li>7AM </li>
                                    <li>8AM </li>
                                    <li>9AM </li>
                                    <li>10AM </li>
                                    <li>11AM </li>
                                    <li>12AM </li>
                                    <li>1PM </li>
                                    <li>2PM </li>
                                    <li>3PM </li>
                                    <li>4PM </li>
                                    <li>5PM </li>
                                    <li>6PM </li>
                                    <li>7PM </li>
                                    <li>8PM </li>
                                    <li>9PM </li>
                                    <li>10PM </li>
                                    <li>11PM </li>
                                    <li>12PM </li>
                                </ul>
                                
                         </div>
                         <div class="form-box">
                            <input type="submit" id="bock_calender" name="submit" value="Block Calendar">
                        </div>
                    </div>
                    
                 </div>
                 
                 <div class="graybox grysmtop">
                         <h2>On March 32, 2018 at 7PM — <strong>Status:</strong> <strong class="red">BUSY </strong></h2>
                    	 <div class="graydesc nopadbdr">
                                <div class="gbox-one">
                                    <h6>Job Description </h6>
                                    <p>Etiam et nibh bibendum, accumsan nulla sed, bibendum sem. Integer rhoncus sem turpis, id sodales turpis elementum eu. Aliquam et varius mi, sed feugiat lorem. Sed viverra magna. </p>
                                </div>
                                <div class="gbox-two">
                                    <h6>Services </h6>
                                    <p class="blue-txt">Boxing, Packaging, Unboxing, Logistics, Trucks, Fragile Handling, Furniture Handling, Storage, Full Relocation Services, 24/7 Support </p>
                                </div>
                                <div class="gbox-three">
                                    <h6>From </h6>
                                    <p class="blue-txt">Melbourne </p>
                                    <br />
                                    <h6>To </h6>
                                    <p class="blue-txt">Sydney </p>
                                </div>
                                <div class="gbox-four">
                                    <h6>Hired by </h6>
                                    <p class="blue-txt">John W. Doe </p>
                                    <br />
                                    <h6>Price </h6>
                                    <p class="blue-txt">$ 2,800.00 </p>
                                </div>
                           </div>
                    </div>
           </div>
           
           <div class="whbox">
           	    <div class="table-sc-wrap"> 
                    <div class="text-hd blkhding">
                        <h2><strong>Ongoing Work </strong></h2>
                    </div>
                    <span class="custom-dropdown">
                        <select>
                            <option>This Week </option>
                            <option>Week 2</option>  
                            <option>Week 3</option>
                            <option>Week 4</option>
                            <option>Week 5</option>
                        </select>
                    </span>
                    <div class="table-wrap five-spd-table">
                        <table>
                            <tr>
                                <th width="28%">Date </th>
                                <th>Service Type </th>
                                <th>Location </th>
                                <th>Hired by </th>
                                <th>Job ID </th>
                                <th>Action </th>
                            </tr>
                            <tr>
                                <td>March 32, 2018 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  8 AM — 10 AM</td>
                                <td class="redtxt">Full Relocation </td>
                                <td>Melbourne to Sydney </td>
                                <td>John W. Doe </td>
                                <td>59302401 </td>
                                <td><button class="expand">expand » </button></td>
                            </tr>
                            <tr>
                                <td>March 32, 2018 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8 AM — 10 AM</td>
                                <td class="redtxt">Packing </td>
                                <td>Sydney Only </td>
                                <td>John W. Doe </td>
                                <td>35939852 </td>
                                <td><button class="expand">expand » </button></td>
                            </tr>
                        </table>
                    </div>
                </div>
           </div>
    </div>
</div>


<div class="footer-wrap"></div>



<!------ Popup Section start ------->

<div class="pop">
  <div class="content-area smgap">
    <div class="wrap content-wrap">
    	<div class="whbox-wrap pos"><i class="icon-remove-sign"></i>
    	   <div class="whbox">
           	    <div class="table-sc-wrap"> 
                    <div class="text-hd padding">
                        <h3>Job Overview <span>#59302401 </span></h3>
                    </div>
                    <div class="table-wrap padding five-spd-table">
                        <table>
                            <tr>
                                <th width="28%">Date </th>
                                <th>Service Type </th>
                                <th>Location </th>
                                <th>Hired by </th>
                                <th>Job ID </th>
                                <th>Action </th>
                            </tr>
                            <tr>
                                <td>March 32, 2018 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  8 AM — 10 AM</td>
                                <td class="redtxt">Full Relocation </td>
                                <td>Melbourne to Sydney </td>
                                <td>John W. Doe </td>
                                <td>59302401 </td>
                                <td><button>expand » </button></td>
                            </tr>
                        </table>
                    </div>
                </div>
           </div>
           <div class="graybox">
                    	 <div class="graydesc">
                                <div class="gbox-one">
                                    <h6>Job Description </h6>
                                    <p>Etiam et nibh bibendum, accumsan nulla sed, bibendum sem. Integer rhoncus sem turpis, id sodales turpis elementum eu. Aliquam et varius mi, sed feugiat lorem. Sed viverra magna. </p>
                                </div>
                                <div class="gbox-two">
                                    <h6>Services </h6>
                                    <p class="blue-txt">Boxing, Packaging, Unboxing, Logistics, Trucks, Fragile Handling, Furniture Handling, Storage, Full Relocation Services, 24/7 Support </p>
                                </div>
                                <div class="gbox-three">
                                    <h6>From </h6>
                                    <p class="blue-txt">Melbourne </p>
                                    <br />
                                    <h6>To </h6>
                                    <p class="blue-txt">Sydney </p>
                                </div>
                                <div class="gbox-four">
                                    <h6>Hired by </h6>
                                    <p class="blue-txt">John W. Doe </p>
                                    <br />
                                    <h6>Price </h6>
                                    <p class="blue-txt">$ 2,800.00 </p>
                                </div>
                           </div>
                           <div class="tickwrap">
                           		<div class="tickarea">
                                	<img src="images/tick-active.png" alt="tick-active">
                                    <span class="active">Job Confirmed </span>
                                </div>
                           		<div class="tickarea">
                                	<img src="images/tick-blue.png" alt="tick-blue">
                                    <span class="blue">On our way to you </span>
                                </div>
                           		<div class="tickarea">
                                	<img src="images/tick.png" alt="tick">
                                    <span>Arrived & Working </span>
                                </div>
                           		<div class="tickarea">
                                	<img src="images/tick.png" alt="tick">
                                    <span>Relocation In Progress </span>
                                </div>
                           		<div class="tickarea">
                                	<img src="images/tick.png" alt="tick">
                                    <span>Finished </span>
                                </div>
                           		<div class="tickarea">
                                	<img src="images/tick.png" alt="tick">
                                    <span>Payment & Feedback </span>
                                </div>
                           </div>
                    </div>
           <div class="padding">
               <div class="announce-area">
                  <h6>Notify client that you're on your way ? </h6>
                  <a href="#" class="anounce">ANNOUNCE CLIENT </a>
                  <div class="announcetxt">Notification successfully sent. </div>
               </div>
               <br class="clear" /> 
           </div>
        </div>
     </div>
  </div>
</div>

<!------ Popup Section end ------->


<!-- JavaScript
================================================== -->
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="../js/conf.js" type="text/javascript"></script>
<script src="../js/custom.js" type="text/javascript"></script>


<script>

    var monthData = {
        'January':1,
        'February':2,
        'March':3,
        'April':4,
        'May':5,
        'June':6,
        'July':7,
        'August':8,
        'September':9,
        'October':10,
        'November':11,
        'December':12
    };
    var year = ""
      , month = ""
      , m = ''
      , d = ""
      , times = {}
      , date = "";
      daysInMonth(new Date().getMonth()+1,new Date().getFullYear());
    function getDay(day) {
            m = monthData[month] == undefined?month:monthData[month];
            m = m < 10?'0' + m:m;
            d = day < 10?'0' + day:day;
            date = year + "-" + m + "-" + d;
    }
    function daysInMonth (mnth, yr) {
        console.log(mnth, yr);
        if (mnth!="" && yr!="") {
            year = yr;
            month = monthData[mnth]==undefined?mnth:monthData[mnth]
            console.log("asdasd");
            var days = new Date(year, month, 0).getDate()
              , temp = "";
            for(var i=1;i<=days;i++) {
                temp += '<li>'+i+' <label class="radiowrap "><input type="radio" class=_'+i+' name="radio"><span class="checkmark" onClick="getDay('+i+')"><strong>'+i+'</strong></span></label></li>';
            }
            $('#daysInMonth').html(temp);
            $('.clear').prop('checked', false);
            getCalenderDates();
        }
              
    }

    function getCalenderDates() {
        var calenderDate = [];
    var now = new Date();
    var firstDay1 = new Date(year, month, 1);
    var lastDay1 = new Date(year,  month, 0);
        console.log("her",firstDay1.getDate(), lastDay1.getDate());
    var m =  month;
        m = m<10?'0'+m:m;
    var d1 = firstDay1.getDate();
        d1 = d1<10?'0'+d1:d1;
    var d2 = lastDay1.getDate();
        d2 = d2<10?'0'+d2:d2;
    var queryDate1  = year + '-' + m + '-' + d1;
    var queryDate2  = year + '-' + m + '-' + d2;
        $.ajax({
            url:API_URL + '/get-calender/' + queryDate1 + '/' + queryDate2 + '/' + localStorage.getItem("userId"),
            type:"GET",
            async:false,
            success:function(res){
                console.log("res",res);
                if(res.result.length>0) {
                    
                    for(let i in res.result){
                        var temp = res.result[i].lm_cal_block_date.split('T')[0];
                            temp = temp.split("-")[2]; 
                        console.log("temp", parseInt(temp) + 1);
                        var dateSelector = parseInt(temp) + 1;
                       // $("#"+dateSelector).prop("checked", true);
                        $("._"+dateSelector).attr('checked', 'checked');
                        console.log($("#"+dateSelector).attr('checked', 'checked'));
                        if(res.result[i].lm_cal_time != "") {
                            res.result[i].lm_cal_time = JSON.parse(res.result[i].lm_cal_time);
                            for(var key in res.result[i].lm_cal_time) {
                                $('#'+key).prop('checked', true);
                            }   
                        }
                    }
                    
                }
            },
            error:function(err){
                console.log("get-calender query error", err);
            }
        });

    }

    //getCalenderDates();

    $(document).ready(function(){
        
    
        $('#bock_calender').click(function(){
            if(Object.keys(times).length == 0) {
                alert("Please select calender time!");
                return;
            }
            else if (date == "") {
                alert("Please select calender date!");
                return;
            }
           
            if (confirm("Block calender for " + date)) {
                $.ajax({
                    url:API_URL + "/calender/"+date +"/" + localStorage.getItem("userId") + "?time=" + JSON.stringify(times),
                    type:"GET",
                    success:function(res){
                        console.log("success", res);
                        location.reload();
                    },
                    error:function(err){
                        console.log("err",err);
                    }
                });
            }
        });

        $('.timecheckmark').click(function(){

            var value = $(this).contents().get(0).textContent;
            if(times.hasOwnProperty(value)){
                delete times[value];
            }
            else {
                times[value] = parseInt(value.split("")[0]);
            }
            console.log("time", times);

        });

        $("#years").change(function(){
            year = $("#years option:selected").val();
            daysInMonth(month, year);
        });
        $("#months").change(function(){
            month = $("#months option:selected").val();
            daysInMonth(month, year);
        });
    });

$(".expand").click(
        function() {   
            $(".pop").fadeIn('slow');
        }
    );
$(".pop i").click(
        function() {   
            $(".pop").fadeOut('fast');
        }
    );
</script>

</body>
</html>