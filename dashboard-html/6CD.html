<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i,900,900i" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css?family=Gugi" rel="stylesheet" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
<link rel="stylesheet" type="text/css" href="css/responsive.css" />
<link rel="stylesheet" type="text/css" href="css/preloader_css.css" />
<title>Love moving | Dashboard</title>
</head>
<body>


<div class="whitehdr">
  <div class="wrap tbpadding">
             <h1 class="logowrap"><a href="https://lovemoving.herokuapp.com"><img src="images/logo.png" alt="logo"></a></h1>	
             <!-- <h1 class="logowrap"><a href="http://localhost/shikhar/lovemoving-html/"><img src="images/logo.png" alt="logo"></a></h1>	 -->
         <div class="topbar-rgt">
         	 <div class="profile-area">
         		<a href="#"><span id='username_1'>Welcome, Gabriel </span><img src="images/pic-1.jpg" alt="pic-1"></a>
             </div>
             <div class="icons">
             	<a href="0chat.html"><img src="images/icon-chat.png" alt="chat"></a>
             </div>
             <div class="icons">
             	<a href="#"><img src="images/icon-bell.png" alt="bell"></a>
             </div>
             <div class="icons">
             	<a href="#"><img src="images/icon-setting.png" alt="setting"></a>
             </div>
             <div class="profile-area">
                <h4 id="logout" style="cursor: pointer;">Logout</h4>
            </div>
         </div>
   </div>
</div>



<div class="navwrap">
		<div class="wrap">
            <label for="show-menu" class="show-menu">Show Menu</label>
			<input type="checkbox" id="show-menu" role="button">
         	<ul id="menu">
                <li><a href="1CD.html">Overview </a></li>
                <li><a href="2CD.html">Profile </a></li>
                <li><a href="3CD.html">Bookings </a></li>
                <li><a href="4CD.html">Notifications </a></li>
                <li><a href="5CD.html">Financial </a></li>
                <li><a href="6CD.html" class="active">Settings </a></li>
            </ul>
         </div>
</div>



<div class="content-area">
   <div class="wrap content-wrap">
       	<div class="whbox nopadding">
        	<div class="padding overhdn halfpadding">
                 <div class="text-hd"><h2><strong>Settings </strong></h2></div>
                 <div class="setting-box">
                     <h2>Profile </h2>
                     <div class="setting-formwrap">
                            <div class="setting-formbox">
                                <span>First Name </span>
                                <input type="text" name="fname" id='fname' value="" placeholder="Lorem ipsum" readonly/>
                            </div>
                            <div class="setting-formbox">
                                <span>Last Name	 </span>
                                <input type="text" name="lname" id="lname" value="" placeholder="Lorem ipsum" readonly/>
                            </div>
                     </div>
                     <div class="setting-formwrap">
                            <div class="setting-formbox">
                                <span>Phone </span>
                                <input type="text" name="phone" id="phone" value="" placeholder="Lorem ipsum" readonly/>
                            </div>
                            <div class="setting-formbox">
                                <span>Company </span>
                                <input type="text" name="company" id="company" value="" placeholder="Lorem ipsum" />
                            </div>
                     </div>
                     <div class="setting-formwrap">
                            <div class="setting-formbox fullwidth">
                                <span>Address </span>
                                <input type="text" name="address" id="address" value="" placeholder="Lorem ipsum" />
                            </div>
                     </div>
                     <div class="setting-formwrap">
                            <div class="setting-formbox">
                                <span>City </span>
                                <input type="text" name="city" id="city" value="" placeholder="Lorem ipsum" />
                            </div>
                            <div class="setting-formbox">
                                <span>ZIP Code </span>
                                <input type="text" name="zipcode" id="zipcode" value="" placeholder="Lorem ipsum" />
                            </div>
                     </div>
                     <div class="setting-formwrap">
                            <div class="setting-formbox">
                                <span>Region </span>
                                <input type="text" name="region" id="region" value="" placeholder="Lorem ipsum" />
                            </div>
                            <div class="setting-formbox">
                                <span>State </span>
                                <input type="text" name="state" id="state" value="" placeholder="Lorem ipsum" />
                            </div>
                     </div>
                     <div class="setting-formwrap">
                        <div class="setting-formbox fullwidth">
                            <span>My Desc </span>
                            <input type="text" name="mydesc" id="mydesc" value="" placeholder="Lorem ipsum" />
                        </div>
                    </div>
                     <div class="setting-formwrap">
                            
                            <div class="form-box">
                                <input type="submit" id="edit_profile" name="submit" value="Edit Profile" />
                            </div>
                            <div class="form-box">
                                <input type="file" id="upload_image" name="avatar" />
                            </div>
                            
                     </div>
                     

                 </div>  
                 <div class="setting-box">
                     <h2>Account </h2>
                     <div class="setting-formwrap">
                            <div class="setting-formbox">
                                <span>Email Address </span>
                                <input type="text" name="email" value="" placeholder="Lorem ipsum" />
                            </div>
                            <div class="setting-formbox">
                                <a href="#">change email Â» </a>
                            </div>
                     </div>
                     <div class="setting-formwrap">
                            <div class="setting-formbox">
                                <span>Change Password </span>
                                <input type="text" name="old-pass" value="" placeholder="Old Pass" />
                            </div>
                            <br class="clear" />
                     </div>
                     <div class="setting-formwrap">
                            <div class="setting-formbox">
                                <input type="text" name="new-pass" value="" placeholder="New Pass" />
                            </div>
                            <br class="clear" />
                     </div>
                     <div class="setting-formwrap">
                            <div class="setting-formbox">
                                <input type="text" name="new-pass-again" value="" placeholder="New Pass Again" />
                            </div>
                            <br class="clear" />
                     </div>
                     <div class="setting-formwrap topmar">
                            <span><strong>Do you want to proceed ? </strong></span>
                            <div class="form-box">
                                <input type="submit" name="submit" value="UPDATE" />
                            </div>
                            <div class="form-box">
                                <input type="button" name="refresh" value="" />
                            </div>
                     </div>
                 </div>  
            </div> 
            <div class="gray-wrap nobtmpadding">
            	<div class="padding overhdn halfpadding">
                	<div class="setting-box">
                		<h2>Financial </h2>
                    	<a href="#">+ Add New Payment Method </a>
                        <br class="clear" />
                        <div class="fin-box">
                            <h6>PayPal Account </h6>
                       		<div class="cardimg"><img src="images/icon-paypal.png" alt="paypal"></div>	
                            <div class="named"><a href="mailto:username@paypal.com">username@paypal.com </a></div>
                               <div class="editdelet">
                            		<a href="#" class="edit">edit </a>	
                            		<a href="#" class="delet">remove</a>	
                               </div>
                        </div> 
                        <div class="fin-box">
                            <h6>Credit Card </h6>
                       		<div class="cardimg"><img src="images/icon-mastercard.png" alt="mastercard"></div>	
                            <div class="named">MasterCard â *7890</div>
                               <div class="editdelet">
                            		<a href="#" class="edit">edit </a>	
                            		<a href="#" class="delet">remove</a>	
                               </div>
                        </div>
                    </div>
                	<div class="setting-box">
                		<h2>Add New Payment Method </h2>
                        <br class="clear" />
                        <h6>Select Type </h6>
                     	<div class="setting-formwrap">
                             <div class="cardarea"><span class="card"><a href="#"><img src="images/icon-mastercard.png" alt="icon-mastercard"></a></span></div>
                             <div class="cardarea"><span class="card"><a href="#"><img src="images/icon-maestro.png" alt="icon-maestro"></a></span></div>
                             <div class="cardarea"><span class="card"><a href="#"><img src="images/icon-visa.png" alt="icon-visa"></a></span></div>
                             <div class="cardarea"><span class="card"><a href="#"><img src="images/icon-paypal.png" alt="icon-paypal"></a></span></div>
                         </div>
                         <div class="setting-formwrap">
                                <div class="cd-name">
                                    <span>Card Number </span>
                                    <input type="text" name="fname" value="" placeholder="1234 5678 9012 3456" />
                                </div>
                         </div>
                         <div class="setting-formwrap">
                                <div class="cd-detail">
                                    <span>Expiration Date </span>
                                    <input class="ex-date" type="text" name="fname" value="" placeholder="03/22" />
                                </div>
                                <div class="cd-detail">
                                    <span>CVV </span>
                                    <input class="cvv" type="text" name="fname" value="" placeholder="404" />
                                </div>
                         </div>
                         <div class="setting-formwrap">
                                <div class="form-box">
                                    <input type="submit" name="submit" value="ADD CARD" />
                                </div>
                         </div>
                    </div>
                </div>
            </div>
            <div class="padding overhdn halfpadding">
            	<div class="setting-box noflt nomargin">
                     <h2>Close Account </h2>
                     <div class="setting-formwrap">
                            <div class="setting-formbox fullwidth">
                                <span>Why do you want to close your account ? </span>
                                <input type="text" name="fname" value="" placeholder="None of your business" />
                            </div>
                     </div>
                     <strong>Ready ? </strong>
                     <div class="ca-btn"><input type="submit" name="submit" value="YES. CLOSE MY ACCOUNT" /></div>
                </div>
            </div>
        </div>
   </div>
</div>



<div class="footer-wrap"></div>
<div class="overlay">
    <div id="loading-img"></div>
</div>

<!-- JavaScript
================================================== -->
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>


<script src="../js/custom.js" type="text/javascript"></script>
<script src="../js/conf.js" type="text/javascript"></script>
<script src="js/common.js" type="text/javascript"></script>



<script type="text/javascript">
    $('#username_1').text('Welcome, ' + jsUcfirst(localStorage.getItem('firstname')));
    $(document).ready(function(){

         $('#fname').val(localStorage.getItem('firstname'));
        $('#lname').val(localStorage.getItem('lastname'));
        $('#phone').val(localStorage.getItem('phone'));
        $(".overlay").show();
        $.ajax({
            url:API_URL + '/users/' + localStorage.getItem('userId'),
            type:'GET',
            success:function(res){
                $(".overlay").hide();
                console.log(res.result[0]);
                if (res.result[0].user_company != '')
                $('#company').val(res.result[0].user_company);
                if (res.result[0].address != '')
                $('#address').val(res.result[0].address);
                if (res.result[0].zip_code != '')
                $('#city').val(res.result[0].city);
                if (res.result[0].city != '')
                $('#zipcode').val(res.result[0].zip_code);
                if (res.result[0].region != '')
                $('#region').val(res.result[0].region);
                if (res.result[0].state != '')
                $('#state').val(res.result[0].state);
                if (res.result[0].user_desc != '')
                $('#mydesc').val(res.result[0].user_desc);
            },
            error:function(err){
                $(".overlay").hide();
                alert(err);
            }
        });

        $('#edit_profile').click(function(){

            var flag = true
              , fname = $('#fname').val() 
              , lname= $('#lname').val()
              , phone = $('#phone').val()
              , company= $('#company').val()
              , address = $('#address').val()
              , city = $('#city').val()
              , zipcode = $('#zipcode').val()
              , region = $('#region').val()
              , state = $('#state').val()
              , mydesc = $('#mydesc').val();
            if( fname == '') {
                $('#fname').css('border-color','red');
                flag = false;
            }
            else{
                $('#fname').css('border-color','');
            }

            if(lname == '') {
                $('#lname').css('border-color','red');
                flag = false;
            }
            else{
                $('#lname').css('border-color','');
            }

            if(phone == '') {
                $('#phone').css('border-color','red');
                flag = false;
            }
            else{
                $('#phone').css('border-color','');
            }

            if( company == '') {
                $('#company').css('border-color','red');
                flag = false;
            }
            else{
                $('#company').css('border-color','');
            }

            if(address == '') {
                $('#address').css('border-color','red');
                flag = false;
            }
            else{
                $('#address').css('border-color','');
            }

            if(city == '') {
                $('#city').css('border-color','red');
                flag = false;
            }
            else{
                $('#city').css('border-color','');
            }

            if(zipcode == '') {
                $('#zipcode').css('border-color','red');
                flag = false;
            }
            else{
                $('#zipcode').css('border-color','');
            }

            if(region == '') {
                $('#region').css('border-color','red');
                flag = false;
            }
            else{
                $('#region').css('border-color','');
            }

            if(state == '') {
                $('#state').css('border-color','red');
                flag = false;
            }
            else{
                $('#state').css('border-color','');
            }

            if($('#mydesc').val() == '') {
                $('#mydesc').css('border-color','red');
                flag = false;
            }
            else{
                $('#mydesc').css('border-color','');
            }
            
            if(flag) {
                var yes_no = confirm("Aru you sure to update your profile?");
                if (!yes_no) return;
                $(".overlay").show();
                var editUser = {};
                editUser.company = company;
                editUser.address = address;
                editUser.city = city;
                editUser.zipcode = zipcode;
                editUser.region = region;
                editUser.state = state;
                editUser.mydesc = mydesc;
                editUser.userid = localStorage.getItem('userId');
                
                $.ajax({
                    url:API_URL + '/edit-user',
                    type:'POST',
                    data:editUser,
                    success:function(res){
                        //setTimeout(function(){
                            $(".overlay").hide();
                        alert("Profile has beed updated successfully!");
                        //}, 5000);
                    },
                    error:function(err){
                        $(".overlay").hide();
                        alert(err);
                    }
                })
            }

        });
        /*$.ajax({
            url:API_URL + '/user-info/' + localStorage.getItem('userId'),
            type:'GET',
            success:function(res){
                console.log("res",res);
            },
            error:function(error){
                //alert(error);
            } 
        });*/
    });

</script>
</body>
</html>